!function(global,factory){if("function"==typeof define&&define.amd)define("@angular/upgrade",["exports","@angular/core","@angular/compiler","@angular/platform-browser-dynamic"],factory);else if("undefined"!=typeof exports)factory(exports,require("@angular/core"),require("@angular/compiler"),require("@angular/platform-browser-dynamic"));else{var mod={exports:{}};factory(mod.exports,global.ng.core,global.ng.compiler,global.ng.platformBrowserDynamic),global.ng=global.ng||{},global.ng.upgrade=mod.exports}}(this,function(exports,_core,_compiler,_platformBrowserDynamic){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function noNg(){throw new Error("AngularJS v1.x is not loaded!")}function onError(a){throw console.error?console.error(a,a.stack):console.log(a,a.stack),a}function controllerKey(a){return"$"+a+"Controller"}function getAttributesAsArray(a){var b=a.attributes,c=void 0;if(b){var d=b.length;c=Array(d);for(var f=0;f<d;f++)c[f]=[b[f].nodeName,b[f].nodeValue]}return c||[]}function getComponentName(a){return a.overriddenName||a.name||a.toString().split("\n")[0]}function supportsNgModel(a){return"function"==typeof a.writeValue&&"function"==typeof a.registerOnChange}function hookupNgModel(a,b){a&&supportsNgModel(b)&&(a.$render=function(){b.writeValue(a.$viewValue)},b.registerOnChange(a.$setViewValue.bind(a)))}function downgradeComponent(a){var b="NG2_UPGRADE_"+downgradeCount++ +"_",c=0,d=function(f,g,h){return{restrict:"E",terminal:!0,require:[REQUIRE_INJECTOR,REQUIRE_NG_MODEL],link:function(l,m,n,o){var p=o[0]||g.get(INJECTOR_KEY),q=o[1],r=function(s){var t=s.get(_core.ComponentFactoryResolver),u=t.resolveComponentFactory(a.component);if(!u)throw new Error("Expecting ComponentFactory for: "+getComponentName(a.component));var w=b+c++,x=new ParentInjectorPromise$1(m),y=new DowngradeComponentAdapter(w,a,m,n,l,q,s,g,f,h,u),z=y.compileContents();y.createComponent(z),y.setupInputs(),y.setupOutputs(),y.registerCleanup(),x.resolve(y.getInjector())};p instanceof ParentInjectorPromise$1?p.then(r):r(p)}}};return d.$inject=[$COMPILE,$INJECTOR,$PARSE],d}function downgradeInjectable(a){var b=function(c){return c.get(a)};return b.$inject=[INJECTOR_KEY],b}function isFunction(a){return"function"==typeof a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.UpgradeAdapterRef=exports.UpgradeAdapter=exports.VERSION=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),VERSION=new _core.Version("4.0.0-beta.8-3c9a46c"),angular={bootstrap:noNg,module:noNg,element:noNg,version:noNg,resumeBootstrap:noNg,getTestability:noNg};try{window.hasOwnProperty("angular")&&(angular=window.angular)}catch(a){}var _bootstrap=angular.bootstrap,module$1=angular.module,element=angular.element,$COMPILE="$compile",$CONTROLLER="$controller",$HTTP_BACKEND="$httpBackend",$INJECTOR="$injector",$PARSE="$parse",$ROOT_SCOPE="$rootScope",$SCOPE="$scope",$TEMPLATE_CACHE="$templateCache",$$TESTABILITY="$$testability",COMPILER_KEY="$$angularCompiler",INJECTOR_KEY="$$angularInjector",NG_ZONE_KEY="$$angularNgZone",REQUIRE_INJECTOR="?^^"+INJECTOR_KEY,REQUIRE_NG_MODEL="?ngModel",ContentProjectionHelper=function(){function ContentProjectionHelper(){_classCallCheck(this,ContentProjectionHelper)}return _createClass(ContentProjectionHelper,[{key:"groupProjectableNodes",value:function(a,b,c){return[c]}}]),ContentProjectionHelper}(),PropertyBinding=function(){function PropertyBinding(a){_classCallCheck(this,PropertyBinding),this.binding=a,this.parseBinding()}return _createClass(PropertyBinding,[{key:"parseBinding",value:function(){var a=this.binding.split(":");this.prop=a[0].trim(),this.attr=(a[1]||this.prop).trim(),this.bracketAttr="["+this.attr+"]",this.parenAttr="("+this.attr+")",this.bracketParenAttr="[("+this.attr+")]";var b=this.attr.charAt(0).toUpperCase()+this.attr.substr(1);this.onAttr="on"+b,this.bindAttr="bind"+b,this.bindonAttr="bindon"+b}}]),PropertyBinding}(),Deferred=function Deferred(){var _this=this;_classCallCheck(this,Deferred),this.promise=new Promise(function(a,b){_this.resolve=a,_this.reject=b})},INITIAL_VALUE={__UNINITIALIZED__:!0},DowngradeComponentAdapter=function(){function DowngradeComponentAdapter(a,b,c,d,f,g,h,l,m,n,o){_classCallCheck(this,DowngradeComponentAdapter),this.id=a,this.info=b,this.element=c,this.attrs=d,this.scope=f,this.ngModel=g,this.parentInjector=h,this.$injector=l,this.$compile=m,this.$parse=n,this.componentFactory=o,this.inputChangeCount=0,this.inputChanges=null,this.componentRef=null,this.component=null,this.changeDetector=null,this.element[0].id=a,this.componentScope=f.$new()}return _createClass(DowngradeComponentAdapter,[{key:"compileContents",value:function(){var _this2=this,a=[],b=this.parentInjector.get(ContentProjectionHelper),c=b.groupProjectableNodes(this.$injector,this.info.component,this.element.contents()),d=c.map(function(f){return _this2.$compile(f)});return this.element.empty(),d.forEach(function(f){f(_this2.scope,function(g){a.push(g),_this2.element.append(g)})}),a}},{key:"createComponent",value:function(a){var b=_core.ReflectiveInjector.resolveAndCreate([{provide:$SCOPE,useValue:this.componentScope}],this.parentInjector);this.componentRef=this.componentFactory.create(b,a,this.element[0]),this.changeDetector=this.componentRef.changeDetectorRef,this.component=this.componentRef.instance,hookupNgModel(this.ngModel,this.component)}},{key:"setupInputs",value:function(){for(var _this3=this,a=this.attrs,b=this.info.inputs||[],d=0;d<b.length;d++){var f=new PropertyBinding(b[d]),g=null;if(a.hasOwnProperty(f.attr)){var h=function(l){var m=INITIAL_VALUE;return function(n){m===INITIAL_VALUE&&(m=n),_this3.updateInput(l,m,n),m=n}}(f.prop);a.$observe(f.attr,h)}else a.hasOwnProperty(f.bindAttr)?g=a[f.bindAttr]:a.hasOwnProperty(f.bracketAttr)?g=a[f.bracketAttr]:a.hasOwnProperty(f.bindonAttr)?g=a[f.bindonAttr]:a.hasOwnProperty(f.bracketParenAttr)&&(g=a[f.bracketParenAttr]);if(null!=g){var _h=function(l){return function(m,n){return _this3.updateInput(l,n,m)}}(f.prop);this.componentScope.$watch(g,_h)}}var c=this.info.component.prototype;c&&c.ngOnChanges&&(this.inputChanges={},this.componentScope.$watch(function(){return _this3.inputChangeCount},function(){var d=_this3.inputChanges;_this3.inputChanges={},_this3.component.ngOnChanges(d)})),this.componentScope.$watch(function(){return _this3.changeDetector&&_this3.changeDetector.detectChanges()})}},{key:"setupOutputs",value:function(){for(var _this4=this,a=this.attrs,b=this.info.outputs||[],c=0;c<b.length;c++){var d=new PropertyBinding(b[c]),f=null,g=!1,h=d.bindonAttr?d.bindonAttr.substring(0,d.bindonAttr.length-6):null,l=d.bracketParenAttr?"[("+d.bracketParenAttr.substring(2,d.bracketParenAttr.length-8)+")]":null;if(a.hasOwnProperty(d.onAttr)?f=a[d.onAttr]:a.hasOwnProperty(d.parenAttr)?f=a[d.parenAttr]:a.hasOwnProperty(h)?(f=a[h],g=!0):a.hasOwnProperty(l)&&(f=a[l],g=!0),null!=f&&null!=g){var m=this.$parse(f),n=m.assign;if(g&&!n)throw new Error("Expression '"+f+"' is not assignable!");var o=this.component[d.prop];if(!o)throw new Error("Missing emitter '"+d.prop+"' on component '"+getComponentName(this.info.component)+"'!");o.subscribe({next:g?function(p){return function(q){return p(_this4.scope,q)}}(n):function(p){return function(q){return p(_this4.scope,{$event:q})}}(m)})}}}},{key:"registerCleanup",value:function(){var _this5=this;this.element.bind("$destroy",function(){_this5.componentScope.$destroy(),_this5.componentRef.destroy()})}},{key:"getInjector",value:function(){return this.componentRef&&this.componentRef.injector}},{key:"updateInput",value:function(a,b,c){this.inputChanges&&(this.inputChangeCount++,this.inputChanges[a]=new _core.SimpleChange(b,c,b===c)),this.component[a]=c}}]),DowngradeComponentAdapter}(),downgradeCount=0,ParentInjectorPromise$1=function(){function ParentInjectorPromise$1(a){_classCallCheck(this,ParentInjectorPromise$1),this.element=a,this.injectorKey=controllerKey(INJECTOR_KEY),this.callbacks=[],a.data(this.injectorKey,this)}return _createClass(ParentInjectorPromise$1,[{key:"then",value:function(a){this.injector?a(this.injector):this.callbacks.push(a)}},{key:"resolve",value:function(a){this.injector=a,this.element.data(this.injectorKey,a),this.element=null,this.callbacks.forEach(function(b){return b(a)}),this.callbacks.length=0}}]),ParentInjectorPromise$1}(),DynamicContentProjectionHelper=function(_ContentProjectionHel){function DynamicContentProjectionHelper(){return _classCallCheck(this,DynamicContentProjectionHelper),_possibleConstructorReturn(this,(DynamicContentProjectionHelper.__proto__||Object.getPrototypeOf(DynamicContentProjectionHelper)).apply(this,arguments))}return _inherits(DynamicContentProjectionHelper,_ContentProjectionHel),_createClass(DynamicContentProjectionHelper,[{key:"groupProjectableNodes",value:function(a,b,c){var d=a.get(COMPILER_KEY),f=d.getNgContentSelectors(b);if(!f)throw new Error("Expecting ngContentSelectors for: "+getComponentName(b));return this.groupNodesBySelector(f,c)}},{key:"groupNodesBySelector",value:function(a,b){for(var c=[],d=new _compiler.SelectorMatcher,f=void 0,g=0,h=a.length;g<h;++g){c[g]=[];var l=a[g];"*"===l?f=g:d.addSelectables(_compiler.CssSelector.parse(l),g)}for(var _loop=function(_g,_h2){var l=[],m=b[_g],n=(0,_compiler.createElementCssSelector)(m.nodeName.toLowerCase(),getAttributesAsArray(m));d.match(n,function(o,p){return l.push(p)}),l.sort(),void 0!==f&&l.push(f),l.length&&c[l[0]].push(m)},_g=0,_h2=b.length;_g<_h2;++_g)_loop(_g,_h2);return c}}]),DynamicContentProjectionHelper}(ContentProjectionHelper),CAMEL_CASE=/([A-Z])/g,INITIAL_VALUE$1={__UNINITIALIZED__:!0},NOT_SUPPORTED="NOT_SUPPORTED",UpgradeNg1ComponentAdapterBuilder=function(){function UpgradeNg1ComponentAdapterBuilder(a){_classCallCheck(this,UpgradeNg1ComponentAdapterBuilder),this.name=a,this.inputs=[],this.inputsRename=[],this.outputs=[],this.outputsRename=[],this.propertyOutputs=[],this.checkProperties=[],this.propertyMap={},this.linkFn=null,this.directive=null,this.$controller=null;var b=a.replace(CAMEL_CASE,function(d,f){return"-"+f.toLowerCase()}),c=this;this.type=(0,_core.Directive)({selector:b,inputs:this.inputsRename,outputs:this.outputsRename}).Class({constructor:[new _core.Inject($SCOPE),_core.ElementRef,function(d,f){return new UpgradeNg1ComponentAdapter(c.linkFn,d,c.directive,f,c.$controller,c.inputs,c.outputs,c.propertyOutputs,c.checkProperties,c.propertyMap)}],ngOnInit:function(){},ngOnChanges:function(){},ngDoCheck:function(){},ngOnDestroy:function(){}})}return _createClass(UpgradeNg1ComponentAdapterBuilder,[{key:"extractDirective",value:function(a){var b=a.get(this.name+"Directive");if(1<b.length)throw new Error("Only support single directive definition for: "+this.name);var c=b[0];c.replace&&this.notSupported("replace"),c.terminal&&this.notSupported("terminal");var d=c.link;return"object"==("undefined"==typeof d?"undefined":_typeof(d))&&d.post&&this.notSupported("link.post"),c}},{key:"notSupported",value:function(a){throw new Error("Upgraded directive '"+this.name+"' does not support '"+a+"'.")}},{key:"extractBindings",value:function(){var a="object"==_typeof(this.directive.bindToController);if(a&&Object.keys(this.directive.scope).length)throw new Error("Binding definitions on scope and controller at the same time are not supported.");var b=a?this.directive.bindToController:this.directive.scope;if("object"==("undefined"==typeof b?"undefined":_typeof(b)))for(var c in b)if(b.hasOwnProperty(c)){var d=b[c],f=d.charAt(0),g=d.charAt(1);d="?"===g?d.substr(2):d.substr(1),d=d||c;var h="output_"+c,n="input_"+c,o=n+": "+c;switch(f){case"=":this.propertyOutputs.push(h),this.checkProperties.push(d),this.outputs.push(h),this.outputsRename.push(h+": "+c+"Change"),this.propertyMap[h]=d,this.inputs.push(n),this.inputsRename.push(o),this.propertyMap[n]=d;break;case"@":case"<":this.inputs.push(n),this.inputsRename.push(o),this.propertyMap[n]=d;break;case"&":this.outputs.push(h),this.outputsRename.push(h+": "+c),this.propertyMap[h]=d;break;default:var p=JSON.stringify(b);throw new Error("Unexpected mapping '"+f+"' in '"+p+"' in '"+this.name+"' directive.")}}}},{key:"compileTemplate",value:function(a,b,c){function d(f){var g=document.createElement("div");return g.innerHTML=f,a(g.childNodes)}var _this7=this;if(void 0!==this.directive.template)this.linkFn=d(isFunction(this.directive.template)?this.directive.template():this.directive.template);else{if(!this.directive.templateUrl)throw new Error("Directive '"+this.name+"' is not a component, it is missing template.");var f=isFunction(this.directive.templateUrl)?this.directive.templateUrl():this.directive.templateUrl,g=b.get(f);if(void 0===g)return new Promise(function(h,l){c("GET",f,null,function(m,n){200==m?h(_this7.linkFn=d(b.put(f,n))):l("GET "+f+" returned "+m+": "+n)})});this.linkFn=d(g)}return null}}],[{key:"resolve",value:function(a,b){var c=[],d=b.get($COMPILE),f=b.get($TEMPLATE_CACHE),g=b.get($HTTP_BACKEND),h=b.get($CONTROLLER);for(var l in a)if(a.hasOwnProperty(l)){var m=a[l];m.directive=m.extractDirective(b),m.$controller=h,m.extractBindings();var n=m.compileTemplate(d,f,g);n&&c.push(n)}return Promise.all(c)}}]),UpgradeNg1ComponentAdapterBuilder}(),UpgradeNg1ComponentAdapter=function(){function UpgradeNg1ComponentAdapter(a,b,c,d,f,g,h,l,m,n){_classCallCheck(this,UpgradeNg1ComponentAdapter),this.linkFn=a,this.directive=c,this.$controller=f,this.inputs=g,this.outputs=h,this.propOuts=l,this.checkProperties=m,this.propertyMap=n,this.controllerInstance=null,this.destinationObj=null,this.checkLastValues=[],this.$element=null,this.element=d.nativeElement,this.componentScope=b.$new(!!c.scope),this.$element=element(this.element);var o=c.controller;c.bindToController&&o?(this.controllerInstance=this.buildController(o),this.destinationObj=this.controllerInstance):this.destinationObj=this.componentScope;for(var p=0;p<g.length;p++)this[g[p]]=null;for(var _p=0;_p<h.length;_p++){var q=this[h[_p]]=new _core.EventEmitter;this.setComponentProperty(h[_p],function(r){return function(s){return r.emit(s)}}(q))}for(var _p2=0;_p2<l.length;_p2++)this[l[_p2]]=new _core.EventEmitter,this.checkLastValues.push(INITIAL_VALUE$1)}return _createClass(UpgradeNg1ComponentAdapter,[{key:"ngOnInit",value:function(){var _this8=this;!this.directive.bindToController&&this.directive.controller&&(this.controllerInstance=this.buildController(this.directive.controller)),this.controllerInstance&&isFunction(this.controllerInstance.$onInit)&&this.controllerInstance.$onInit();var a=this.directive.link;if("object"==("undefined"==typeof a?"undefined":_typeof(a))&&(a=a.pre),a){var g=this.resolveRequired(this.$element,this.directive.require);this.directive.link(this.componentScope,this.$element,NOT_SUPPORTED,g,NOT_SUPPORTED)}for(var c,b=[];c=this.element.firstChild;)this.element.removeChild(c),b.push(c);this.linkFn(this.componentScope,function(d){for(var _g2=0,h=d.length;_g2<h;_g2++)_this8.element.appendChild(d[_g2])},{parentBoundTranscludeFn:function(d,f){f(b)}}),this.controllerInstance&&isFunction(this.controllerInstance.$postLink)&&this.controllerInstance.$postLink()}},{key:"ngOnChanges",value:function(a){var _this9=this,b={};Object.keys(a).forEach(function(c){var d=a[c];_this9.setComponentProperty(c,d.currentValue),b[_this9.propertyMap[c]]=d}),isFunction(this.destinationObj.$onChanges)&&this.destinationObj.$onChanges(b)}},{key:"ngDoCheck",value:function(){for(var a=this.destinationObj,b=this.checkLastValues,c=this.checkProperties,d=0;d<c.length;d++){var f=a[c[d]],g=b[d];if(f!==g)if("number"==typeof f&&isNaN(f)&&"number"==typeof g&&isNaN(g));else{var h=this[this.propOuts[d]];h.emit(b[d]=f)}}this.controllerInstance&&isFunction(this.controllerInstance.$doCheck)&&this.controllerInstance.$doCheck()}},{key:"ngOnDestroy",value:function(){this.controllerInstance&&isFunction(this.controllerInstance.$onDestroy)&&this.controllerInstance.$onDestroy()}},{key:"setComponentProperty",value:function(a,b){this.destinationObj[this.propertyMap[a]]=b}},{key:"buildController",value:function(a){var b={$scope:this.componentScope,$element:this.$element},c=this.$controller(a,b,null,this.directive.controllerAs);return this.$element.data(controllerKey(this.directive.name),c),c}},{key:"resolveRequired",value:function(a,b){if(b){if("string"==typeof b){var c=b,d=!1,f=!1,g=!1;"?"==c.charAt(0)&&(d=!0,c=c.substr(1)),"^"==c.charAt(0)&&(g=!0,c=c.substr(1)),"^"==c.charAt(0)&&(f=!0,c=c.substr(1));var h=controllerKey(c);f&&(a=a.parent());var l=g?a.inheritedData(h):a.data(h);if(!l&&!d)throw new Error("Can not locate '"+b+"' in '"+this.directive.name+"'.");return l}if(b instanceof Array){for(var _c=[],_d=0;_d<b.length;_d++)_c.push(this.resolveRequired(a,b[_d]));return _c}throw new Error("Directive '"+this.directive.name+"' require syntax unrecognized: "+this.directive.require)}}}]),UpgradeNg1ComponentAdapter}(),upgradeCount=0,UpgradeAdapter=function(){function UpgradeAdapter(a,b){if(_classCallCheck(this,UpgradeAdapter),this.ng2AppModule=a,this.compilerOptions=b,this.idPrefix="NG2_UPGRADE_"+upgradeCount++ +"_",this.directiveResolver=new _compiler.DirectiveResolver,this.downgradedComponents=[],this.ng1ComponentsToBeUpgraded={},this.upgradedProviders=[],this.moduleRef=null,!a)throw new Error("UpgradeAdapter cannot be instantiated without an NgModule of the Angular app.")}return _createClass(UpgradeAdapter,[{key:"downgradeNg2Component",value:function(a){this.downgradedComponents.push(a);var b=this.directiveResolver.resolve(a),c={component:a,inputs:b.inputs,outputs:b.outputs};return downgradeComponent(c)}},{key:"upgradeNg1Component",value:function(a){return this.ng1ComponentsToBeUpgraded.hasOwnProperty(a)?this.ng1ComponentsToBeUpgraded[a].type:(this.ng1ComponentsToBeUpgraded[a]=new UpgradeNg1ComponentAdapterBuilder(a)).type}},{key:"registerForNg1Tests",value:function(a){var _this10=this,b=window.angular.mock;if(!b||!b.module)throw new Error("Failed to find 'angular.mock.module'.");this.declareNg1Module(a),b.module(this.ng1Module.name);var c=new UpgradeAdapterRef;return this.ng2BootstrapDeferred.promise.then(function(d){c._bootstrapDone(_this10.moduleRef,d)},onError),c}},{key:"bootstrap",value:function(a,b,c){var _this11=this;this.declareNg1Module(b);var d=new UpgradeAdapterRef,f=window.angular;f.resumeBootstrap=void 0,this.ngZone.run(function(){_bootstrap(a,[_this11.ng1Module.name],c)});var g=new Promise(function(h){if(f.resumeBootstrap){var l=f.resumeBootstrap;f.resumeBootstrap=function(){f.resumeBootstrap=l,f.resumeBootstrap.apply(this,arguments),h()}}else h()});return Promise.all([this.ng2BootstrapDeferred.promise,g]).then(function(_ref){var _ref2=_slicedToArray(_ref,1),h=_ref2[0];element(a).data(controllerKey(INJECTOR_KEY),_this11.moduleRef.injector),_this11.moduleRef.injector.get(_core.NgZone).run(function(){d._bootstrapDone(_this11.moduleRef,h)})},onError),d}},{key:"upgradeNg1Provider",value:function(a,b){var c=b&&b.asToken||a;this.upgradedProviders.push({provide:c,useFactory:function(d){return d.get(a)},deps:[$INJECTOR]})}},{key:"downgradeNg2Provider",value:function(a){return downgradeInjectable(a)}},{key:"declareNg1Module",value:function(){var _this12=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=[],c=void 0,d=void 0,f=void 0,g=this,h=this.ng1Module=module$1(this.idPrefix,a),l=(0,_platformBrowserDynamic.platformBrowserDynamic)();return this.ngZone=new _core.NgZone({enableLongStackTrace:Zone.hasOwnProperty("longStackTraceZoneSpec")}),this.ng2BootstrapDeferred=new Deferred,h.factory(INJECTOR_KEY,function(){return _this12.moduleRef.injector.get(_core.Injector)}).constant(NG_ZONE_KEY,this.ngZone).factory(COMPILER_KEY,function(){return _this12.moduleRef.injector.get(_core.Compiler)}).config(["$provide","$injector",function(m,n){m.decorator($ROOT_SCOPE,["$delegate",function(o){if(d=o.constructor.prototype,!d.hasOwnProperty("$apply"))throw new Error("Failed to find '$apply' on '$rootScope'!");return c=d.$apply,d.$apply=function(p){return b.push(p)},f=o}]),n.has($$TESTABILITY)&&m.decorator($$TESTABILITY,["$delegate",function(o){var p=o.whenStable,q=function q(r){p.call(this,function(){var s=g.moduleRef.injector.get(_core.Testability);s.isStable()?r.apply(this,arguments):s.whenStable(q.bind(this,r))})};return o.whenStable=q,o}])}]),h.run(["$injector","$rootScope",function(m,n){UpgradeNg1ComponentAdapterBuilder.resolve(_this12.ng1ComponentsToBeUpgraded,m).then(function(){var o=(0,_core.NgModule)({providers:[{provide:$INJECTOR,useFactory:function(){return m}},{provide:$COMPILE,useFactory:function(){return m.get($COMPILE)}},{provide:ContentProjectionHelper,useClass:DynamicContentProjectionHelper},_this12.upgradedProviders],imports:[_this12.ng2AppModule],entryComponents:_this12.downgradedComponents}).Class({constructor:function(){},ngDoBootstrap:function(){}});l._bootstrapModuleWithZone(o,_this12.compilerOptions,_this12.ngZone).then(function(p){_this12.moduleRef=p,_this12.ngZone.run(function(){if(d){for(d.$apply=c;b.length;)n.$apply(b.shift());d=null}})}).then(function(){return _this12.ng2BootstrapDeferred.resolve(m)},onError).then(function(){var p=_this12.ngZone.onMicrotaskEmpty.subscribe({next:function(){return n.$digest()}});n.$on("$destroy",function(){p.unsubscribe()})})}).catch(function(o){return _this12.ng2BootstrapDeferred.reject(o)})}]),h}}]),UpgradeAdapter}(),UpgradeAdapterRef=function(){function UpgradeAdapterRef(){_classCallCheck(this,UpgradeAdapterRef),this._readyFn=null,this.ng1RootScope=null,this.ng1Injector=null,this.ng2ModuleRef=null,this.ng2Injector=null}return _createClass(UpgradeAdapterRef,[{key:"_bootstrapDone",value:function(a,b){this.ng2ModuleRef=a,this.ng2Injector=a.injector,this.ng1Injector=b,this.ng1RootScope=b.get($ROOT_SCOPE),this._readyFn&&this._readyFn(this)}},{key:"ready",value:function(a){this._readyFn=a}},{key:"dispose",value:function(){this.ng1Injector.get($ROOT_SCOPE).$destroy(),this.ng2ModuleRef.destroy()}}]),UpgradeAdapterRef}();exports.VERSION=VERSION,exports.UpgradeAdapter=UpgradeAdapter,exports.UpgradeAdapterRef=UpgradeAdapterRef});